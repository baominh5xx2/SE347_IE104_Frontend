<div class="tours-page">
  <div class="search-section">
    <div class="container mx-auto px-6 py-6">
      <app-search-bar 
        [searchType]="'tour'" 
        (onSearch)="onSearch($event)">
      </app-search-bar>
    </div>
  </div>

  <div class="container mx-auto px-6 py-8">
    <div class="filters-section mb-8">
      <div class="sort-filter">
        <label class="filter-label">
          <span class="sort-icon">⇅</span>
          <span>Sắp xếp theo:</span>
        </label>
        <select [ngModel]="sortBy" (ngModelChange)="changeSortBy($event)" class="sort-select">
          <option value="popular">Phổ biến nhất</option>
          <option value="price_asc">Giá thấp đến cao</option>
          <option value="price_desc">Giá cao đến thấp</option>
          <option value="duration">Thời gian</option>
        </select>
      </div>
    </div>

    <div class="results-header mb-6">
      <h2 class="results-title">
        @if (isLoading) {
          Đang tìm kiếm...
        } @else {
          @if (totalFound > 0) {
            Tìm thấy {{ totalFound }} tour
          } @else {
            Tìm thấy {{ filteredTours.length }} tour
          }
        }
      </h2>
    </div>

    @if (isLoading) {
      <div class="loading-state">
        <div class="spinner"></div>
        <p>Đang tải danh sách tour...</p>
      </div>
    } @else if (errorMessage) {
      <div class="error-state">
        <i class="fas fa-exclamation-triangle"></i>
        <h3>Lỗi khi tải danh sách tour</h3>
        <p>{{ errorMessage }}</p>
        <button class="btn-reset" (click)="loadTours()">
          <i class="fas fa-redo"></i>
          Thử lại
        </button>
      </div>
    } @else if (filteredTours.length > 0) {
      <div class="tours-grid">
        @for (tour of filteredTours; track tour.package_id) {
          <app-tour-card [tour]="tour"></app-tour-card>
        }
      </div>
    } @else {
      <div class="empty-state">
        <i class="fas fa-search"></i>
        <h3>Không tìm thấy tour nào</h3>
        <p>Thử thay đổi tiêu chí tìm kiếm hoặc xóa bộ lọc</p>
        <button class="btn-reset" (click)="loadTours()">
          <i class="fas fa-redo"></i>
          Tải lại
        </button>
      </div>
    }
  </div>
</div>
