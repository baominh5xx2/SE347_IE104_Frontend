<div class="favorites-page">
    <div class="container mx-auto px-6 py-8">
        <div class="page-header mb-8">
            <h1 class="page-title">
                <svg class="heart-icon" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                        fill="currentColor" />
                </svg>
                Tours Yêu Thích
            </h1>
            <p class="page-subtitle" *ngIf="!isLoading && totalFavorites > 0">
                Bạn có {{ totalFavorites }} tour trong danh sách yêu thích
            </p>
        </div>

        @if (isLoading) {
        <div class="loading-state">
            <div class="spinner"></div>
            <p>Đang tải danh sách tours yêu thích...</p>
        </div>
        } @else if (errorMessage) {
        <div class="error-state">
            <svg class="error-icon" width="64" height="64" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <h3>Lỗi khi tải danh sách tours yêu thích</h3>
            <p>{{ errorMessage }}</p>
            <button class="btn-retry" (click)="loadFavorites()">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M8 1V3M8 13V15M3 8H1M15 8H13M3.343 3.343L4.757 4.757M11.243 11.243L12.657 12.657M3.343 12.657L4.757 11.243M11.243 4.757L12.657 3.343"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    <path
                        d="M8 5C6.34315 5 5 6.34315 5 8C5 9.65685 6.34315 11 8 11C9.65685 11 11 9.65685 11 8C11 6.34315 9.65685 5 8 5Z"
                        stroke="currentColor" stroke-width="2" />
                </svg>
                Thử lại
            </button>
        </div>
        } @else if (favoriteTours.length > 0) {
        <div class="favorites-grid">
            @for (tour of favoriteTours; track tour.package_id) {
            <div class="favorite-tour-card-wrapper">
                <app-tour-card [tour]="tour" (toggleFavorite)="onRemoveFavorite($event)">
                </app-tour-card>
            </div>
            }
        </div>
        } @else {
        <div class="empty-state">
            <svg class="empty-icon" width="80" height="80" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <h3>Chưa có tour yêu thích</h3>
            <p>Bạn chưa thêm tour nào vào danh sách yêu thích. Hãy khám phá các tour và thêm vào danh sách yêu thích của
                bạn!</p>
            <a routerLink="/tours" class="btn-explore">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" />
                    <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2" />
                </svg>
                Khám phá tours
            </a>
        </div>
        }
    </div>
</div>

<p-toast></p-toast>